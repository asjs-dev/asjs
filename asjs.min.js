;function property(target,propertyName,params){params.enumerable=true;params.configurable=true;Object.defineProperty(target,propertyName,params);};
function extendClass(parent){return $.extend(true,{},parent);};
function extendProperty(target,parent,propertyName){Object.defineProperty(target,propertyName,Object.getOwnPropertyDescriptor(parent,propertyName));};
function singleton(c,i){if(!c.$)c.$=new i();return c.$;};
function is(a,b){var c=new b();var is=true;for(var key in c){if(!a[key])is=false;};
c=null;return is;};
function cast(a,b){return is(a,b)?a:null;};
function extendFunction(target,parent,propertyName){target[propertyName]=parent[propertyName];};
function trace(){console.log(arguments);};
var sourcePath="";function sourcePath(value){if(sourcePath!="")return;sourcePath=value;};
var includedScript={};function includeOnce(filename){if(includedScript[filename])return;includedScript[filename]=1;$.ajaxSetup({async:false});$.getScript(sourcePath+filename);$.ajaxSetup({async:true});};
var stage;var ASJS={};ASJS.inited;ASJS.start=function(baseClass){if(ASJS.inited)return;ASJS.inited=true;$(document).ready(function(){stage=new ASJS.Stage();stage.init();new baseClass();});};ASJS.Point=function(x,y){var that={};that.x=x||0;that.y=y||0;return that;};ASJS.Rectangle=function(x,y,width,height){var that=new ASJS.Point(x,y);that.width=width||0;that.height=height||0;return that;};ASJS.Matrix=function(a,b,c,d,e,f){var that={};that.a=a||1;that.b=b||0;that.c=c||0;that.d=d||1;that.e=e||0;that.f=f||0;that.translate=function(tx,ty){matrix.e=tx;matrix.f=ty;};
that.skew=function(sx,sy){matrix.b=sx;matrix.c=sy;};
that.scale=function(sw,sh){matrix.a=sw;matrix.d=sh;};
return that;};ASJS.GeomUtils={};ASJS.GeomUtils.THETA=Math.PI/180;ASJS.GeomUtils.pointInOrigo=function(point){return point.x==0&&point.y==0;};
ASJS.GeomUtils.twoPointDistance=function(pointA,pointB){return Math.sqrt(Math.pow(pointB.x-pointA.x,2)+Math.pow(pointB.y-pointA.y,2));};
ASJS.GeomUtils.pointInRect=function(point,rect){return point.x>=rect.x&&point.x<=rect.x+rect.width&&point.y>=rect.y&&point.y<=rect.y+rect.height;};
ASJS.GeomUtils.twoPointEquals=function(pointA,pointB){return pointA.x==pointB.x&&pointA.y==pointB.y;};
ASJS.GeomUtils.twoPointAngle=function(pointA,pointB){var v=new ASJS.Point(pointB.x-pointA.x,pointB.y-pointA.y);var angle=Math.acos(v.x/Math.sqrt(Math.pow(v.x,2)+Math.pow(v.y,2)));return angle/ASJS.GeomUtils.THETA;};
ASJS.GeomUtils.rectInRect=function(rectA,rectB){return rectA.x>=rectB.x&&rectA.y==rectB.y&&rectA.x+rectA.width<=rectB.x+rectB.width&&rectA.y+rectA.height<=rectB.y+rectB.height;};
ASJS.GeomUtils.localToGlobal=function(target,point){if(!point)throw new Error("DisplayObject.localToGlobal: Point is null");var pos=new ASJS.Point(point.x,point.y);var child=target;while(child){pos.x*=child.scaleX;pos.y*=child.scaleY;pos.x+=child.x;pos.y+=child.y;child=child.parent;};
return pos;};
ASJS.GeomUtils.globalToLocal=function(target,point){if(!point)throw new Error("DisplayObject.globalToLocal: Point is null");var pos=new ASJS.Point(point.x,point.y);var child=target;var children=[child];while(child){child=child.parent;children.unshift(child);};
var i=0;var l=children.length;while(++i<l){child=children[i];pos.x-=child.x;pos.y-=child.y;pos.x/=child.scaleX;pos.y/=child.scaleY;};
return pos;};
ASJS.GeomUtils.hitTest=function(target,point){var rotationDeg=-target.rotation*ASJS.GeomUtils.THETA;var rect=target.bounds;var globalPos=target.localToGlobal(new ASJS.Point(0,0));var diffPoint=new ASJS.Point(point.x-(globalPos.x+rect.width*0.5),point.y-(globalPos.y+rect.height*0.5));var rotatedDiffPoint=new ASJS.Point(diffPoint.x*Math.cos(rotationDeg)-diffPoint.y*Math.sin(rotationDeg),diffPoint.x*Math.sin(rotationDeg)+diffPoint.y*Math.cos(rotationDeg));var recalcPoint=new ASJS.Point(point.x-(diffPoint.x-rotatedDiffPoint.x),point.y-(diffPoint.y-rotatedDiffPoint.y));var localPoint=target.globalToLocal(recalcPoint);return localPoint.x>=0&&localPoint.y>=0&&localPoint.x<=rect.width&&localPoint.y<=rect.height;};ASJS.Event=function(type){var that=$.Event(type);return that;};
ASJS.Event.CHANGE="change";ASJS.MouseEvent=function(type){var that=new ASJS.Event(type);return that;};
ASJS.MouseEvent.SCROLL="DOMMouseScroll mousewheel scroll";ASJS.MouseEvent.CLICK="click";ASJS.MouseEvent.DOUBLE_CLICK="dblclick";ASJS.MouseEvent.MOUSE_DOWN="mousedown";ASJS.MouseEvent.MOUSE_UP="mouseup";ASJS.MouseEvent.MOUSE_LEAVE="mouseleave";ASJS.MouseEvent.MOUSE_ENTER="mouseenter";ASJS.MouseEvent.MOUSE_MOVE="mousemove";ASJS.MouseEvent.MOUSE_OVER="mouseover";ASJS.MouseEvent.MOUSE_OUT="mouseout";ASJS.MouseEvent.TOUCH_START="touchstart";ASJS.MouseEvent.TOUCH_END="touchend";ASJS.MouseEvent.TOUCH_MOVE="touchmove";ASJS.MouseEvent.TOUCH_CANCEL="touchcancel";ASJS.MouseEvent.CONTEXT_MENU="contextmenu";ASJS.MouseEvent.SELECT_START="onselectstart";ASJS.WindowEvent=function(type){var that=new ASJS.Event(type);return that;};
ASJS.WindowEvent.POPSTATE="popstate";ASJS.WindowEvent.RESIZE="resize";ASJS.WindowEvent.ONLINE="online";ASJS.WindowEvent.OFFLINE="offline";ASJS.Window=function(){return singleton(ASJS.Window,function(){var that=new ASJS.EventDispatcher(window);var _browserStatus;var _requestAnimationFrame;property(that,"isOnline",{get:function(){return _browserStatus==ASJS.WindowEvent.ONLINE;}});property(that,"width",{get:function(){return that.jQuery.width();}});property(that,"height",{get:function(){return that.jQuery.height();}});property(that,"screen",{get:function(){return that.el.screen;}});property(that,"screenTop",{get:function(){return that.screen.availTop;}});property(that,"screenLeft",{get:function(){return that.screen.availLeft;}});property(that,"screenWidth",{get:function(){return that.screen.width;}});property(that,"screenHeight",{get:function(){return that.screen.height;}});property(that,"screenAvailWidth",{get:function(){return that.screen.availWidth;}});property(that,"screenAvailHeight",{get:function(){return that.screen.availHeight;}});property(that,"scrollTop",{get:function(){return that.jQuery.scrollTop();},set:function(value){that.jQuery.scrollTop(value);}});property(that,"scrollLeft",{get:function(){return that.jQuery.scrollLeft();},set:function(value){that.jQuery.scrollLeft(value);}});property(that,"location",{get:function(){return that.el.location;},set:function(value){that.el.location=value;}});property(that,"navigator",{get:function(){return that.el.navigator||navigator;}});property(that,"audioContext",{get:function(){return that.el.AudioContext||that.el.webkitAudioContext;}});property(that,"userMedia",{get:function(){return that.navigator.getUserMedia||that.navigator.webkitGetUserMedia||that.navigator.msGetUserMedia||that.navigator.mozGetUserMedia;}});property(that,"devicePixelRatio",{get:function(){return that.el.devicePixelRatio;}});that.setTimeout=function(callback,duration){return that.el.setTimeout(function(){that.requestAnimationFrame(callback);},duration);};
that.clearTimeout=function(id){return that.el.clearTimeout(id);};
that.setInterval=function(callback,duration){return that.el.setInterval(function(){that.requestAnimationFrame(callback);},duration);};
that.clearInterval=function(id){return that.el.clearInterval(id);};
that.requestAnimationFrame=function(callback){_requestAnimationFrame(callback);};
(function(){_requestAnimationFrame=that.el.requestAnimationFrame||that.el.mozRequestAnimationFrame||that.el.webkitRequestAnimationFrame||that.el.msRequestAnimationFrame||function(f){return setTimeout(f,1)};_browserStatus=that.navigator.onLine?ASJS.WindowEvent.ONLINE:ASJS.WindowEvent.OFFLINE;that.addEventListener(ASJS.WindowEvent.ONLINE+" "+ASJS.WindowEvent.OFFLINE,function(e){_browserStatus=e.type;});})();return that;});};ASJS.EventDispatcher=function(tag){var that={};that.jQuery=$(tag||"<div />");property(that,"el",{get:function(){return that.jQuery[0];}});that.dispatchEvent=function(type,data,bubble){var eventBubble=bubble==undefined?true:bubble;if(eventBubble)that.jQuery.trigger(type,data);else that.jQuery.triggerHandler(type,data);};
that.addEventListener=function(type,callback){if(type==ASJS.MouseEvent.SCROLL&&that.jQuery==new ASJS.Window().jQuery)that.jQuery.scroll(callback);else that.jQuery.on(type,callback);};
that.removeEventListeners=function(){that.jQuery.off();};
that.removeEventListener=function(type,callback){that.jQuery.off(type,null,callback);};
that.hasEventListener=function(which,handler){var events=$._data(that.el,"events");if(events==undefined)return false;var w=which.indexOf(" ")>-1?which.split(" "):[which];var i=-1;var l=w.length;while(++i<l){var event=events[w[i]];if(event!=undefined){var j=-1;var k=event.length;while(++j<k){if(event[j].handler==handler)return true;}}};
return false;};
return that;};ASJS.KeyboardEvent=function(type){var that=new ASJS.Event(type);return that;};
ASJS.KeyboardEvent.KEY_UP="keyup";ASJS.KeyboardEvent.KEY_DOWN="keydown";ASJS.KeyboardEvent.KEY_PRESS="keypress";ASJS.FocusEvent=function(type){var that=new ASJS.Event(type);return that;};
ASJS.FocusEvent.FOCUS="focus";ASJS.FocusEvent.BLUR="blur";ASJS.MediaEvent=function(type){var that=new ASJS.Event(type);return that;};
ASJS.MediaEvent.ABORT="abort";ASJS.MediaEvent.CAN_PLAY="canplay";ASJS.MediaEvent.CAN_PLAY_THROUGH="canplaythrough";ASJS.MediaEvent.DURATION_CHANGE="durationchange";ASJS.MediaEvent.EMPTIED="emptied";ASJS.MediaEvent.ENDED="ended";ASJS.MediaEvent.ERROR="error";ASJS.MediaEvent.LOADED_DATA="loadeddata";ASJS.MediaEvent.LOADED_META_DATA="loadedmetadata";ASJS.MediaEvent.LOAD_START="loadstart";ASJS.MediaEvent.PAUSE="pause";ASJS.MediaEvent.PLAY="play";ASJS.MediaEvent.PLAYING="playing";ASJS.MediaEvent.PROGRESS="progress";ASJS.MediaEvent.RATE_CHANGE="ratechange";ASJS.MediaEvent.SEEKED="seeked";ASJS.MediaEvent.SEEKING="seeking";ASJS.MediaEvent.STALLED="stalled";ASJS.MediaEvent.SUSPEND="suspend";ASJS.MediaEvent.TIME_UPDATE="timeupdate";ASJS.MediaEvent.VOLUME_CHANGE="volumechange";ASJS.MediaEvent.WAITING="waiting";ASJS.LoaderEvent=function(type){var that=new ASJS.Event(type);that.value;return that;};
ASJS.LoaderEvent.LOAD="load";ASJS.LoaderEvent.ERROR="error";ASJS.LoaderEvent.ABORT="abort";ASJS.LoaderEvent.LOAD_START="loadstart";ASJS.LoaderEvent.PROGRESS="progress";ASJS.LoaderEvent.LOAD_END="loadend";ASJS.Keyboard=function(){var that={};var _window=new ASJS.Window();var _pressedKeys={};var _downCallback;var _upCallback;that.isPressed=function(which){return _pressedKeys[which];};
that.addKeyListener=function(target,downCallback,upCallback){if(!target)return;_downCallback=downCallback;_upCallback=upCallback;that.removeKeyListener(target);target.addEventListener(ASJS.KeyboardEvent.KEY_DOWN,onKeyDown);target.addEventListener(ASJS.KeyboardEvent.KEY_UP,onKeyUp);_window.addEventListener(ASJS.FocusEvent.BLUR,onBlur);};
that.removeKeyListener=function(target){target.removeEventListener(ASJS.KeyboardEvent.KEY_DOWN,onKeyDown);target.removeEventListener(ASJS.KeyboardEvent.KEY_UP,onKeyUp);_window.removeEventListener(ASJS.FocusEvent.BLUR,onBlur);};
function onBlur(event){var key;for(key in _pressedKeys)_pressedKeys[key]=false;};
function onKeyDown(event){_pressedKeys[event.which]=true;if(_downCallback)_downCallback();};
function onKeyUp(event){_pressedKeys[event.which]=false;if(_upCallback)_upCallback();};
return that;};
ASJS.Keyboard.SPACE=32;ASJS.Keyboard.BACKSPACE=8;ASJS.Keyboard.TAB=9;ASJS.Keyboard.ENTER=13;ASJS.Keyboard.SHIFT=16;ASJS.Keyboard.CTRL=17;ASJS.Keyboard.ALT=18;ASJS.Keyboard.PAUSE_BREAK=19;ASJS.Keyboard.CAPS_LOCK=20;ASJS.Keyboard.ESCAPE=27;ASJS.Keyboard.PAGE_UP=33;ASJS.Keyboard.PAGE_DOWN=34;ASJS.Keyboard.END=35;ASJS.Keyboard.HOME=36;ASJS.Keyboard.LEFT_ARROW=37;ASJS.Keyboard.UP_ARROW=38;ASJS.Keyboard.RIGHT_ARROW=39;ASJS.Keyboard.DOWN_ARROW=40;ASJS.Keyboard.INSERT=45;ASJS.Keyboard.DELETE=46;ASJS.Keyboard.NUM_0=48;ASJS.Keyboard.NUM_1=49;ASJS.Keyboard.NUM_2=50;ASJS.Keyboard.NUM_3=51;ASJS.Keyboard.NUM_4=52;ASJS.Keyboard.NUM_5=53;ASJS.Keyboard.NUM_6=54;ASJS.Keyboard.NUM_7=55;ASJS.Keyboard.NUM_8=56;ASJS.Keyboard.NUM_9=57;ASJS.Keyboard.A=65;ASJS.Keyboard.B=66;ASJS.Keyboard.C=67;ASJS.Keyboard.D=68;ASJS.Keyboard.E=69;ASJS.Keyboard.F=70;ASJS.Keyboard.G=71;ASJS.Keyboard.H=72;ASJS.Keyboard.I=73;ASJS.Keyboard.J=74;ASJS.Keyboard.K=75;ASJS.Keyboard.L=76;ASJS.Keyboard.M=77;ASJS.Keyboard.N=78;ASJS.Keyboard.O=79;ASJS.Keyboard.P=80;ASJS.Keyboard.Q=81;ASJS.Keyboard.R=82;ASJS.Keyboard.S=83;ASJS.Keyboard.T=84;ASJS.Keyboard.U=85;ASJS.Keyboard.V=86;ASJS.Keyboard.W=87;ASJS.Keyboard.X=88;ASJS.Keyboard.Y=89;ASJS.Keyboard.Z=90;ASJS.Keyboard.LEFT_WINDOW_KEY=91;ASJS.Keyboard.RIGHT_WINDOW_KEY=92;ASJS.Keyboard.SELECT_KEY=93;ASJS.Keyboard.NUMPAD_0=96;ASJS.Keyboard.NUMPAD_1=97;ASJS.Keyboard.NUMPAD_2=98;ASJS.Keyboard.NUMPAD_3=99;ASJS.Keyboard.NUMPAD_4=100;ASJS.Keyboard.NUMPAD_5=101;ASJS.Keyboard.NUMPAD_6=102;ASJS.Keyboard.NUMPAD_7=103;ASJS.Keyboard.NUMPAD_8=104;ASJS.Keyboard.NUMPAD_9=105;ASJS.Keyboard.MULTIPLY=106;ASJS.Keyboard.ADD=107;ASJS.Keyboard.SUBTRACT=109;ASJS.Keyboard.DECIMAL_POINT=110;ASJS.Keyboard.DIVIDE=111;ASJS.Keyboard.F1=112;ASJS.Keyboard.F2=113;ASJS.Keyboard.F3=114;ASJS.Keyboard.F4=115;ASJS.Keyboard.F5=116;ASJS.Keyboard.F6=117;ASJS.Keyboard.F7=118;ASJS.Keyboard.F8=119;ASJS.Keyboard.F9=120;ASJS.Keyboard.F10=121;ASJS.Keyboard.F11=122;ASJS.Keyboard.F12=123;ASJS.Keyboard.NUM_LOCK=144;ASJS.Keyboard.SCROLL_LOCK=145;ASJS.Keyboard.SEMICOLON=186;ASJS.Keyboard.EQUAL_SIGN=187;ASJS.Keyboard.COMMA=188;ASJS.Keyboard.DASH=189;ASJS.Keyboard.PERIOD=190;ASJS.Keyboard.FORWARD_SLASH=191;ASJS.Keyboard.GRAVE_ACCENT=192;ASJS.Keyboard.OPEN_BRACKET=219;ASJS.Keyboard.BACK_SLASH=220;ASJS.Keyboard.CLOSE_BRAKET=221;ASJS.Keyboard.SINGLE_QUOTE=222;ASJS.Mouse=function(){return singleton(ASJS.Mouse,function(){var that={};var _window=new ASJS.Window();var EVENT=ASJS.MouseEvent.MOUSE_MOVE+" "+ASJS.MouseEvent.TOUCH_MOVE;var _mousePos=new ASJS.Point();property(that,"mouseX",{get:function(){return _mousePos.x;}});property(that,"mouseY",{get:function(){return _mousePos.y;}});that.show=function(){stage.setCSS("cursor","default");};
that.hide=function(){stage.setCSS("cursor","none");};
that.getRelativePosition=function(value){return value.globalToLocal(_mousePos);};that.init=function(){if(stage&&!_window.hasEventListener(EVENT,onMouseMove))_window.addEventListener(EVENT,onMouseMove);};
that.getTouchPointByEvent=function(event){var iosTouchEvent=event.touches;var androidTouchEvent=(event.originalEvent?event.originalEvent.touches:null);var touches=iosTouchEvent||androidTouchEvent;if(touches&&touches.length>0){var touch=touches[0];return new ASJS.Point(touch.pageX,touch.pageY);};
return new ASJS.Point(event.pageX,event.pageY);};
function onMouseMove(event){_mousePos=that.getTouchPointByEvent(event);};
return that;});};ASJS.Cycler=function(){return singleton(ASJS.Cycler,function(){var that={};var _window=new ASJS.Window();var _isPlaying=false;var _fps=24;var _interval=getIntervalByFps();var _callbacks=[];var _timeoutId;property(that,"isPlaying",{get:function(){return _isPlaying;}});property(that,"fps",{get:function(){return _fps;},set:function(value){_fps=value;_interval=getIntervalByFps();that.start();}});that.addCallback=function(callback){if(that.callbackExists(callback))return;_callbacks.push(callback);};
that.removeCallback=function(callback){if(!that.callbackExists(callback))return;var i=-1;var l=_callbacks.length;var index;while(++i<l){if(_callbacks[i]==callback)index=i;};
_callbacks.splice(index,1);};
that.callbackExists=function(callback){var i=-1;var l=_callbacks.length;while(++i<l){if(_callbacks[i]==callback)return true;};
return false;};
that.start=function(){_isPlaying=true;tick();};
that.stop=function(){_isPlaying=false;_timeoutId=_window.clearTimeout(_timeoutId);};
function tick(){_timeoutId=_window.clearTimeout(_timeoutId);var i=-1;var l=_callbacks.length;while(++i<l){if(_callbacks[i])_callbacks[i]();};
_timeoutId=_window.setTimeout(tick,_interval);};
function getIntervalByFps(){return 1000/_fps;};
return that;});};ASJS.Loader=function(){var that=new ASJS.EventDispatcher();var _url;var _data;var _requestType;var _contentType=false;var _dataType;var _headers;var _content;property(that,"url",{get:function(){return _url;}});property(that,"content",{get:function(){return _content;}});property(that,"headers",{get:function(){return _headers;},set:function(value){_headers=value;}});property(that,"data",{get:function(){return _data;},set:function(value){_data=value;}});property(that,"requestType",{get:function(){return _requestType;},set:function(value){_requestType=value;}});property(that,"dataType",{get:function(){return _dataType;},set:function(value){_dataType=value;}});property(that,"contentType",{get:function(){return _contentType;},set:function(value){_contentType=value;}});that.load=function(url){if(!url)return;_url=url;var requestData={type:_requestType,url:_url,cache:false,contentType:_contentType,crossDomain:true,processData:false,xhrFields:{withCredentials:true,onprogress:onProgress},progress:function(event){if(event.lengthComputable)onProgress(event);},success:onSuccessEvent,error:onErrorEvent,complete:onCompleteEvent};if(_dataType)requestData.dataType=_dataType;if(_data)requestData.data=_data;if(_headers)requestData.headers=_headers;$.ajax(requestData);onLoadStart();};
function onSuccessEvent(data){_content=data;onLoad(data);};
function onErrorEvent(xhr,textStatus,errorThrown){_content=xhr;onError(xhr);};
function onCompleteEvent(data){onLoadEnd(data);};
function onLoadStart(){dispatch(ASJS.LoaderEvent.LOAD_START);};
function onProgress(data){dispatch(ASJS.LoaderEvent.PROGRESS,data);};
function onLoad(data){dispatch(ASJS.LoaderEvent.LOAD,data);};
function onLoadEnd(data){dispatch(ASJS.LoaderEvent.LOAD_END,data);};
function onError(data){dispatch(ASJS.LoaderEvent.ERROR,data);};
function dispatch(type,data){var e=new ASJS.LoaderEvent(type);e.value=data;that.dispatchEvent(e);};
return that;};ASJS.RequestMethod={};ASJS.RequestMethod.DELETE="DELETE";ASJS.RequestMethod.GET="GET";ASJS.RequestMethod.HEAD="HEAD";ASJS.RequestMethod.OPTIONS="OPTIONS";ASJS.RequestMethod.POST="POST";ASJS.RequestMethod.PUT="PUT";ASJS.PrimitiveDisplayObject=function(tag){var that=new ASJS.EventDispatcher(tag);property(that,"text",{get:function(){return that.jQuery.text();},set:function(value){that.jQuery.text(value);}});that.getAttr=function(key){return that.jQuery.attr(key);};
that.setAttr=function(key,value){that.jQuery.attr(key,value);};
that.removeAttr=function(key){that.jQuery.removeAttr(key);};
that._sendAddedToStageEvent=function(){};
return that;};ASJS.DisplayObject=function(tag){var that=new ASJS.PrimitiveDisplayObject(tag);var _mouse=new ASJS.Mouse();var CREATED="created";var _state=CREATED;var _filters={};var _rotation=0;var _scaleX=1;var _scaleY=1;var _parent=null;var _cssDisplay="block";property(that,"bounds",{get:function(){return new ASJS.Rectangle(that.calcX,that.calcY,that.calcWidth,that.calcHeight);}});property(that,"tabIndex",{get:function(){return that.getAttr("tabindex");},set:function(value){that.setAttr("tabindex",value);}});property(that,"tooltip",{get:function(){return that.setAttr("title");},set:function(value){that.setAttr("title",value);}});property(that,"filters",{get:function(){return _filters;},set:function(value){_filters=value;var filters="";var i=-1;var l=_filters.length;while(++i<l){var filter=_filters[i];filters+=" "+filter.execute();};
that.setCSS("-webkit-filter",filters);that.setCSS("filter",filters);}});property(that,"id",{get:function(){return that.getAttr("id");},set:function(value){that.setAttr("id",value);}});property(that,"enabled",{get:function(){return that.getAttr("disabled")!="disabled";},set:function(value){if(value){that.removeAttr("disabled");that.setCSS("pointer-events","auto");}else{that.setAttr("disabled","disabled");that.setCSS("pointer-events","none");}}});property(that,"display",{get:function(){return _cssDisplay;},set:function(value){_cssDisplay=value;that.setCSS("display",_cssDisplay);}});property(that,"html",{get:function(){return that.jQuery.html();},set:function(value){that.jQuery.html(value);}});property(that,"visible",{get:function(){return that.getCSS("display")!="none";},set:function(value){that.setCSS("display",value?_cssDisplay:"none");}});property(that,"alpha",{get:function(){return parseFloat(that.getCSS("opacity"))||1;},set:function(value){that.setCSS("opacity",value);}});property(that,"x",{get:function(){return(parseFloat(that.getCSS("left"))||0)-(that.width-that.width/_scaleX)*0.5;},set:function(value){that.setCSS("left",value+(that.width-that.width/_scaleX)*0.5);}});property(that,"y",{get:function(){return(parseFloat(that.getCSS("top"))||0)-(that.height-that.height/_scaleY)*0.5;},set:function(value){that.setCSS("top",value+(that.height-that.height/_scaleY)*0.5);}});property(that,"calcX",{get:function(){return that.x+(parseFloat(that.getCSS("marginLeft"))||0);}});property(that,"calcY",{get:function(){return that.y+(parseFloat(that.getCSS("marginTop"))||0);}});property(that,"width",{get:function(){return that.jQuery.width()*_scaleX;},set:function(value){that.setCSS("width",typeof value!="number"?value:(parseFloat(value)/_scaleX));}});property(that,"height",{get:function(){return that.jQuery.height()*_scaleY;},set:function(value){that.setCSS("height",typeof value!="number"?value:(parseFloat(value)/_scaleY));}});property(that,"calcWidth",{get:function(){var paddingLeft=parseFloat(that.getCSS("paddingLeft"))||0;var paddingRight=parseFloat(that.getCSS("paddingRight"))||0;var borderLeft=parseFloat(that.getCSS("borderLeft"))||0;var borderRight=parseFloat(that.getCSS("borderRight"))||0;return that.width+paddingLeft+paddingRight+borderLeft+borderRight;}});property(that,"calcHeight",{get:function(){var paddingTop=parseFloat(that.getCSS("paddingTop"))||0;var paddingBottom=parseFloat(that.getCSS("paddingBottom"))||0;var borderTop=parseFloat(that.getCSS("borderTop"))||0;var borderBottom=parseFloat(that.getCSS("borderBottom"))||0;return that.height+paddingTop+paddingBottom+borderTop+borderBottom;}});property(that,"rotation",{get:function(){return _rotation;},set:function(value){_rotation=parseFloat(value);drawTransform();}});property(that,"scaleX",{get:function(){return _scaleX;},set:function(value){_scaleX=parseFloat(value);var oW=that.width/_scaleX;that.x+=(that.width-oW)*0.5;drawTransform();}});property(that,"scaleY",{get:function(){return _scaleY;},set:function(value){_scaleY=parseFloat(value);var oH=that.height/_scaleY;that.y+=(that.height-oH)*0.5;drawTransform();}});property(that,"parent",{get:function(){return _parent;},set:function(value){if(value==null||value.getChildIndex(that)>-1){_parent=value;that._sendAddedToStageEvent();}}});property(that,"stage",{get:function(){return that.parent?that.parent.stage:null;}});property(that,"mouse",{get:function(){return _mouse.getRelativePosition(that);}});that.requestFullscreen=function(){if(!ASJS.DisplayObject.FULLSCREEN_ENABLED)return;if(that.el.requestFullscreen)that.el.requestFullscreen();else if(that.el.webkitRequestFullscreen)that.el.webkitRequestFullscreen();else if(that.el.mozRequestFullScreen)that.el.mozRequestFullScreen();else if(that.el.msRequestFullscreen)that.el.msRequestFullscreen();};
that.exitFullscreen=function(){if(!ASJS.DisplayObject.FULLSCREEN_ENABLED)return;if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();};
that.scale=function(scaleX,scaleY){that.scaleX=scaleX;that.scaleY=scaleY;};
that.clear=function(){that.html="";that.text="";};
that._sendAddedToStageEvent=function(){var state=that.stage?ASJS.Stage.ADDED_TO_STAGE:ASJS.Stage.REMOVED_FROM_STAGE;if(_state!=CREATED||state!=ASJS.Stage.REMOVED_FROM_STAGE){that.dispatchEvent(state,null,false);};
_state=state;};
that.getCSS=function(key){return that.jQuery.css(key);};
that.setCSS=function(key,value){that.jQuery.css(key,value);};
that.addClass=function(value){return that.jQuery.addClass(value);};
that.removeClass=function(value){that.jQuery.removeClass(value);};
that.move=function(x,y){that.x=x;that.y=y;};
that.setSize=function(w,h){that.width=w;that.height=h;};
that.hitTest=function(point){return ASJS.GeomUtils.hitTest(that,point);};
that.localToGlobal=function(point){return ASJS.GeomUtils.localToGlobal(that,point);};that.globalToLocal=function(point){return ASJS.GeomUtils.globalToLocal(that,point);};function drawTransform(){that.setCSS("transform",'rotate('+_rotation+'deg) scaleX('+_scaleX+') scaleY('+_scaleY+')');};
(function(){that.id="intance_"+ASJS.DisplayObject.INSTANCE_ID;that.tabindex=-1;that.setCSS("pointer-events","auto");that.setCSS("position","absolute");that.setCSS("display",_cssDisplay);that.setSize(0,0);that.move(0,0);ASJS.DisplayObject.INSTANCE_ID++;})();return that;};ASJS.DisplayObject.INSTANCE_ID=0;ASJS.DisplayObject.FULLSCREEN_ENABLED=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;ASJS.Sprite=function(tag){var that=new ASJS.DisplayObject(tag);var _super={};var _children=[];var _mouseChildren=true;extendProperty(_super,that,"bounds");property(that,"bounds",{get:function(){var rect=_super.bounds;var size=new ASJS.Rectangle();var i=-1;var l=that.numChildren;while(++i<l){var child=that.getChildAt(i);var childRect=child.bounds;if(i==0){size.x=childRect.x;size.y=childRect.y;size.width=childRect.width+childRect.x;size.height=childRect.height+childRect.y;}else{if(childRect.x<size.x)size.x=childRect.x;if(childRect.y<size.y)size.y=childRect.y;if(childRect.width+childRect.x>size.width)size.width=childRect.width+childRect.x;if(childRect.height+childRect.y>size.height)size.height=childRect.height+childRect.y;}};
rect.x+=size.x;rect.y+=size.y;if(size.width-size.x>rect.width)rect.width=size.width-size.x;if(size.height-size.y>rect.height)rect.height=size.height-size.y;return rect;}});extendFunction(_super,that,"_sendAddedToStageEvent");that._sendAddedToStageEvent=function(){_super._sendAddedToStageEvent();var i=-1;var l=that.numChildren;while(++i<l){var child=that.getChildAt(i);child._sendAddedToStageEvent();}};
property(that,"mouseChildren",{get:function(){return _mouseChildren;},set:function(value){_mouseChildren=value;var i=-1;var l=that.numChildren;while(++i<l)that.getChildAt(i).enabled=_mouseChildren;}});property(that,"numChildren",{get:function(){return _children.length;}});extendFunction(_super,that,"clear");that.clear=function(){while(that.numChildren>0)that.removeChildAt(0);_super.clear();};
that.contains=function(child){return that.getChildIndex(child)>-1;};
that.addChild=function(child){return that.addChildAt(child,that.numChildren);};
that.addChildAt=function(child,index){if(!child)return null;if(child.parent)child.parent.removeChild(child);that.jQuery.append(child.jQuery);child.enabled=child.enabled?_mouseChildren:child.enabled;_children.push(child);that.setChildIndex(child,index);child.parent=that;return child;};
that.removeChild=function(child){if(!child)return null;child.jQuery.detach();var index=that.getChildIndex(child);if(index>-1)_children.splice(index,1);child.parent=null;return child;};
that.removeChildAt=function(index){return that.removeChild(that.getChildAt(index));};
that.getChildAt=function(index){if(index<0||index>that.numChildren-1)return null;return _children[index];};
that.setChildIndex=function(child,index){if(!child||index<0)return null;var childActualIndex=that.getChildIndex(child);if(childActualIndex>-1)_children.splice(childActualIndex,1);var afterChild=that.getChildAt(index);if(afterChild)child.jQuery.insertBefore(afterChild.jQuery);_children.splice(index,0,child);return child;};
that.getChildIndex=function(child){if(!child)return-1;return _children.indexOf(child);};
that.swapChildren=function(childA,childB){var childAIndex=that.getChildIndex(childA);var childBIndex=that.getChildIndex(childB);if(childAIndex==-1||childBIndex==-1)return false;that.setChildIndex(childA,childBIndex);that.setChildIndex(childB,childAIndex);return true;};
that.getChildByDOMObject=function(domObject){if(!domObject)return null;var i=-1;var l=that.numChildren;while(++i<l){var child=that.getChildAt(i);if(domObject.id==child.id)return child;else if(child.numChildren){var grandChild=child.getChildByDOMObject(domObject);if(grandChild)return grandChild;}};
return null;};
return that;};ASJS.Stage=function(){return singleton(ASJS.Stage,function(){var that=new ASJS.Sprite("body");var _inited=false;var _mouse=new ASJS.Mouse();var _window=new ASJS.Window();var _stageWidth=0;var _stageHeight=0;property(that,"title",{get:function(){return document.title;},set:function(value){document.title=value;}});property(that,"stage",{get:function(){return that;}});property(that,"stageWidth",{get:function(){return _stageWidth;}});property(that,"stageHeight",{get:function(){return _stageHeight;}});that.init=function(){if(_inited)return;_inited=true;that.clear();that.setSize("100%","100%");_window.addEventListener(ASJS.WindowEvent.RESIZE,recalcStageSize);recalcStageSize();_mouse.init();};function recalcStageSize(){var overflowX=that.getCSS("overflow-x");var overflowY=that.getCSS("overflow-y");that.setCSS("overflow-x","hidden");that.setCSS("overflow-y","hidden");_stageWidth=_window.width;_stageHeight=_window.height;that.setCSS("overflow-x",overflowX);that.setCSS("overflow-y",overflowY);that.dispatchEvent(ASJS.Stage.RESIZE);};
return that;});};ASJS.Stage.RESIZE="ASJS-Stage-resize";ASJS.Stage.ADDED_TO_STAGE="ASJS-Stage-addedToStage";ASJS.Stage.REMOVED_FROM_STAGE="ASJS-Stage-removedFromStage";ASJS.IFrame=function(){var that=new ASJS.DisplayObject("<iframe />");property(that,"src",{get:function(){return that.getAttr("src");},set:function(value){that.setAttr("src",value);}});return that;};ASJS.Bitmap=function(bitmapWidth,bitmapHeight){var that=new ASJS.DisplayObject("<canvas />");var TARGET_FILL="targetFill";var TARGET_STROKE="targetStroke";var _context;var _drawLine=false;var _drawFill=false;var _bitmapFilters;var _keepOriginal=true;var _original;property(that,"keepOriginal",{get:function(){return _keepOriginal;},set:function(value){_keepOriginal=value;}});property(that,"bitmapFilters",{get:function(){return _bitmapFilters;},set:function(value){_bitmapFilters=value;executeFilters();}});property(that,"bitmapWidth",{get:function(){return that.getAttr("width");},set:function(value){var w=Math.max(1,value||1);that.setAttr("width",w);}});property(that,"bitmapHeight",{get:function(){return that.getAttr("height");},set:function(value){var h=Math.max(1,value||1);that.setAttr("height",h);}});property(that,"blendMode",{get:function(){return getContext().globalCompositeOperation;},set:function(value){getContext().globalCompositeOperation=value;}});property(that,"globalAlpha",{get:function(){return getContext().globalAlpha;},set:function(value){getContext().globalAlpha=value;}});that.beginLineColorStyle=function(size,rgb,alpha,miterLimit,lineJoin,lineCap){beginPath();setLineStyle(size,miterLimit,lineJoin,lineCap);beginColorFill(TARGET_STROKE,rgb,alpha);};
that.beginLineGradientStyle=function(size,type,gradientParams,colors,lineMitter,lineJoin,lineCap){beginPath();setLineStyle(size,miterLimit,lineJoin,lineCap);beginGradientFill(TARGET_STROKE,type,gradientParams,colors);};
that.beginLinePatternStyle=function(size,image,repeat,lineMitter,lineJoin,lineCap){beginPath();setLineStyle(size,miterLimit,lineJoin,lineCap);beginPatternFill(TARGET_STROKE,image,repeat);};
that.beginColorFill=function(rgb,alpha){beginFill();beginColorFill(TARGET_FILL,rgb,alpha);};
that.beginGradientFill=function(type,gradientParams,colors){beginFill();beginGradientFill(TARGET_FILL,type,gradientParams,colors);};
that.beginPatternFill=function(image,repeat){beginFill();beginPatternFill(TARGET_FILL,image,repeat);};
that.translate=function(x,y){getContext().translate(x,y);};
that.rotate=function(value){getContext().rotate(value*ASJS.GeomUtils.THETA);};
that.scale=function(w,h){getContext().scale(w,h);};
that.transform=function(matrix){getContext().transform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.e,matrix.f);};
that.endLineStyle=function(){var ctx=getContext();if(_drawLine)ctx.stroke();_drawLine=false;};
that.endFill=function(){var ctx=getContext();getContext().closePath();if(_drawFill)ctx.fill();_drawFill=false;};
that.moveTo=function(x,y){getContext().moveTo(x,y);};
that.lineTo=function(x,y){getContext().lineTo(x,y);};
that.drawRect=function(x,y,w,h){var ctx=getContext();if(_drawFill)ctx.fillRect(x,y,w,h);if(_drawLine)ctx.strokeRect(x,y,w,h);};
that.drawCircle=function(x,y,r){that.drawArc(x,y,r,0,2*Math.PI);};
that.drawArc=function(x,y,r,begin,end,counterclockwise){getContext().arc(x,y,r,begin,end,counterclockwise);};
that.drawHTML=function(value){try{rasterizeHTML.drawHTML(value,that.el);}catch(e){throw new Error("Missing: http://www.github.com/cburgmer/rasterizeHTML.js");}};
that.drawImage=function(image,sx,sy,sw,sh,x,y,w,h){try{getContext().drawImage(image.el,sx,sy,sw,sh,x,y,w,h);}catch(e){}};
that.textStyle=function(font,align,baseline){var ctx=getContext();ctx.font=font;ctx.textAlign=align;ctx.textBaseline=baseline;};
that.drawText=function(text,x,y){var ctx=getContext();if(_drawFill)ctx.fillText(text,x,y);if(_drawLine)ctx.strokeText(text,x,y);};
that.measureText=function(text){return getContext().measureText(text);};
that.clearRect=function(x,y,w,h){getContext().clearRect(x,y,w,h);};
that.getDataUrl=function(type,encoderOptions){return that.el.toDataURL(type,encoderOptions);};
that.getColorRgb=function(x,y){var color=that.getImageData(x,y,1,1);return{r:color.data[0],g:color.data[1],b:color.data[2],a:color.data[3]};};
that.setColor=function(x,y){that.drawRect(x,y,1,1);};
that.getImageData=function(x,y,w,h){return getContext().getImageData(x,y,w,h);};
that.putImageData=function(imageData,x,y){getContext().putImageData(imageData,x,y);};
that.merge=function(bitmap,srcX,srcY,srcW,srcH,x,y){that.putImageData(bitmap.getImageData(srcX,srcY,srcW,srcH),x,y);};
that.destroy=function(){that.clearRect(0,0,that.bitmapWidth,that.bitmapHeight);that.setBitmapSize(1,1);if(_original)_original=null;};
that.setBitmapSize=function(width,height){that.bitmapWidth=width;that.bitmapHeight=height;};
that.clone=function(){var bmp=new ASJS.Bitmap(that.bitmapWidth,that.bitmapHeight);bmp.setSize(that.bitmapWidth,that.bitmapHeight);bmp.drawImage(that,0,0,that.bitmapWidth,that.bitmapHeight,0,0,that.bitmapWidth,that.bitmapHeight);return bmp;};
that.getOriginal=function(){var bmp=new ASJS.Bitmap(that.bitmapWidth,that.bitmapHeight);if(_original)bmp.drawImage(_original,0,0,that.bitmapWidth,that.bitmapHeight,0,0,that.bitmapWidth,that.bitmapHeight);return bmp;};
function beginPath(){getContext().beginPath();_drawLine=true;};
function beginFill(){getContext().beginPath();_drawFill=true;};
function addColorToGradient(gradient,stop,color,alpha){var rgb=hexToRGB(color);rgb.a=alpha;gradient.addColorStop(stop,rgbToString(rgb));};
function fillStyle(targetType,value){var ctx=getContext();if(targetType==TARGET_FILL)ctx.fillStyle=value;else ctx.strokeStyle=value;};
function setLineStyle(size,miterLimit,lineJoin,lineCap){var ctx=getContext();ctx.lineWidth=size;ctx.miterLimit=miterLimit||10;ctx.lineJoin=lineJoin||ASJS.Bitmap.LINE_JOIN_MITER;ctx.lineCap=lineCap||ASJS.Bitmap.LINE_CAP_BUTT;};
function beginColorFill(targetType,rgb,alpha){var rgb=hexToRgb(rgb);rgb.a=alpha;fillStyle(targetType,rgbToString(rgb));};
function beginGradientFill(targetType,type,gradientData,colors){var ctx=getContext();var gradient;switch(type){case ASJS.Bitmap.GRADIENT_LINEAR:gradient=ctx.createLinearGradient(gradientParams);break;case ASJS.Bitmap.GRADIENT_RADIAL:gradient=ctx.createRadialGradient(gradientParams);break;};
var i=-1;var l=colors.length;var color;while(++i<l){color=colors[i];addColorToGradient(gradient,color.stop,color.color,color.alpha);};
fillStyle(targetType,gradient);};
function beginPatternFill(targetType,image,repeat){var pattern=getContext().createPattern(image.el,repeat||ASJS.Bitmap.PATTERN_REPEAT);fillStyle(targetType,pattern);};
function getContext(){if(!_context)_context=that.el.getContext("2d");return _context;};
function rgbToString(rgb){return"rgba( "+rgb.r+", "+rgb.g+", "+rgb.b+", "+rgb.a+" )";};
function hexToRgb(value){var shorthandRegex=/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i;value=value.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b;});var result=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(value);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16),a:1}:null;};
function executeFilters(){var l=that.bitmapFilters.length;if(l==0)return;if(that.keepOriginal){if(!_original){_original=new ASJS.Image();_original.src=that.getDataUrl("image/png",1.0);}else{that.drawImage(_original,0,0,that.bitmapWidth,that.bitmapHeight,0,0,that.bitmapWidth,that.bitmapHeight);_original=null;}};
var i=-1;var pixels=that.getImageData(0,0,that.bitmapWidth,that.bitmapHeight);while(++i<l){var filter=that.bitmapFilters[i];pixels=filter.execute(pixels);};
that.putImageData(pixels,0,0);};
(function(){if(!getContext()){throw new Error("ASJS.Bitmap (canvas) is not supported in your browser!");};
that.setBitmapSize(bitmapWidth,bitmapHeight);})();return that;};
ASJS.Bitmap.GRADIENT_LINEAR="ASJS-Bitmap-gradientLinear";ASJS.Bitmap.GRADIENT_RADIAL="ASJS-Bitmap-gradientRadial";ASJS.Bitmap.PATTERN_REPEAT="repeat";ASJS.Bitmap.PATTERN_NO_REPEAT="no-repeat";ASJS.Bitmap.PATTERN_REPEAT_X="repeat-x";ASJS.Bitmap.PATTERN_REPEAT_Y="repeat-y";ASJS.Bitmap.LINE_CAP_BUTT="butt";ASJS.Bitmap.LINE_CAP_ROUND="round";ASJS.Bitmap.LINE_CAP_SQUARE="square";ASJS.Bitmap.LINE_JOIN_BEVEL="bevel";ASJS.Bitmap.LINE_JOIN_ROUND="round";ASJS.Bitmap.LINE_JOIN_MITER="miter";ASJS.Image=function(){var that=new ASJS.DisplayObject("<img />");property(that,"src",{get:function(){return that.getAttr("src");},set:function(value){that.setAttr("src",value);}});property(that,"bitmap",{get:function(){var bmp=new ASJS.Bitmap(that.imageWidth,that.imageHeight);bmp.drawImage(that,0,0,that.imageWidth,that.imageHeight,0,0,that.imageWidth,that.imageHeight);return bmp;}});property(that,"alt",{get:function(){return that.getAttr("alt");},set:function(value){that.setAttr("alt",value);}});property(that,"imageWidth",{get:function(){return that.el.width;}});property(that,"imageHeight",{get:function(){return that.el.height;}});return that;};ASJS.Label=function(){var that=new ASJS.DisplayObject("<label />");property(that,"for",{get:function(){return that.getAttr("for");},set:function(value){if(value&&value.id)that.setAttr("for",value.id);}});return that;};ASJS.Link=function(){var that=new ASJS.Sprite("<a />");property(that,"href",{get:function(){return that.getAttr("href");},set:function(value){that.setAttr("href",value);}});property(that,"target",{get:function(){return that.getAttr("target");},set:function(value){that.setAttr("target",value);}});property(that,"download",{get:function(){return that.getAttr("download");},set:function(value){that.setAttr("download",value);}});return that;};ASJS.Scale9Grid=function(){var that=new ASJS.Sprite();var _size=new ASJS.Point();var _rectangle=new ASJS.Rectangle();var _blocks=[];var _super={};extendProperty(_super,that,"x");property(that,"x",{set:function(value){_super.x=value;that.drawNow();}});extendProperty(_super,that,"y");property(that,"y",{set:function(value){_super.y=value;that.drawNow();}});extendProperty(_super,that,"width");property(that,"width",{set:function(value){_super.width=value;that.drawNow();}});extendProperty(_super,that,"height");property(that,"height",{set:function(value){_super.height=value;that.drawNow();}});property(that,"size",{get:function(){return _size;},set:function(value){_size=value;that.drawNow();}});property(that,"rect",{get:function(){return _rectangle;},set:function(value){_rectangle=value;that.drawNow();}});extendFunction(_super,that,"setSize");that.setSize=function(w,h){_super.setSize(w,h);that.drawNow();};
that.drawNow=function(){var rightSize=_size.x-(_rectangle.x+_rectangle.width);var bottomSize=_size.y-(_rectangle.y+_rectangle.height);var center=new ASJS.Point(that.width-_rectangle.x-rightSize,that.height-_rectangle.y-bottomSize);var percent=new ASJS.Point(Math.round(center.x/_rectangle.width),Math.round(center.y/_rectangle.height));var tl=new ASJS.Point(-(percent.x*_rectangle.x)*2,-(percent.y*_rectangle.y)*2);var br=new ASJS.Point(percent.x*rightSize,percent.y*bottomSize);var ps=new ASJS.Point((_size.x*percent.x)*2,(_size.y*percent.y)*2);_blocks[0].setSize(_rectangle.x,_rectangle.y);_blocks[1].setSize(that.width-_rectangle.x-rightSize,_rectangle.y);_blocks[2].setSize(that.width-_blocks[0].width-_blocks[1].width,_rectangle.y);_blocks[3].setSize(_rectangle.x,that.height-_rectangle.y-bottomSize);_blocks[4].setSize(_blocks[1].width,_blocks[3].height);_blocks[5].setSize(_blocks[2].width,_blocks[3].height);_blocks[6].setSize(_rectangle.x,that.height-_blocks[0].height-_blocks[3].height);_blocks[7].setSize(_blocks[1].width,_blocks[6].height);_blocks[8].setSize(_blocks[2].width,_blocks[6].height);_blocks[1].x=_blocks[0].width;_blocks[2].x=_blocks[1].x+_blocks[1].width;_blocks[3].y=_blocks[0].height;_blocks[4].move(_blocks[3].width,_blocks[1].height);_blocks[5].move(_blocks[4].x+_blocks[4].width,_blocks[1].height);_blocks[6].y=_blocks[3].y+_blocks[3].height;_blocks[7].move(_blocks[6].width,_blocks[6].y);_blocks[8].move(_blocks[7].x+_blocks[7].width,_blocks[6].y);_blocks[1].setCSS("background-position",tl.x+"px top");_blocks[1].setCSS("background-size",ps.x+"px "+_size.y+"px");_blocks[3].setCSS("background-position","left "+tl.y+"px");_blocks[3].setCSS("background-size",_size.x+"px "+ps.y+"px");_blocks[4].setCSS("background-position",tl.x+"px "+tl.y+"px");_blocks[4].setCSS("background-size",ps.x+"px "+ps.y+"px");_blocks[5].setCSS("background-position","right "+tl.y+"px");_blocks[5].setCSS("background-size",_size.x+"px "+ps.y+"px");_blocks[7].setCSS("background-position",tl.x+"px bottom");_blocks[7].setCSS("background-size",ps.x+"px "+_size.y+"px");};
property(that,"backgroundImage",{set:function(value){var i=-1;var l=9;while(++i<l){_blocks[i].setCSS("background-image","url("+value+")");};
that.drawNow();}});(function(){var i=-1;var l=9;while(++i<l){_blocks[i]=new ASJS.Sprite();_blocks[i].setCSS("background-repeat","no-repeat");that.addChild(_blocks[i]);};
_blocks[0].setCSS("background-position","left top");_blocks[2].setCSS("background-position","right top");_blocks[6].setCSS("background-position","left bottom");_blocks[8].setCSS("background-position","right bottom");})();return that;};ASJS.AbstractMediaPlayer=function(tag){var that=new ASJS.Sprite(tag);property(that,"controls",{get:function(){return that.el.controls;},set:function(value){that.el.controls=value;}});property(that,"preload",{get:function(){return that.el.preload;},set:function(value){that.el.preload=value;}});property(that,"muted",{get:function(){return that.el.muted;},set:function(value){that.el.muted=value;}});property(that,"loop",{get:function(){return that.el.loop;},set:function(value){that.el.loop=value;}});property(that,"autoplay",{get:function(){return that.el.autoplay;},set:function(value){that.el.autoplay=value;}});property(that,"src",{get:function(){return that.el.src;},set:function(value){that.el.src=value;}});property(that,"crossOrigin",{get:function(){return that.el.crossOrigin;},set:function(value){that.el.crossOrigin=value;}});property(that,"currentTime",{get:function(){return that.el.currentTime;},set:function(value){that.el.currentTime=value;}});property(that,"defaultMuted",{get:function(){return that.el.defaultMuted;},set:function(value){that.el.defaultMuted=value;}});property(that,"defaultPlaybackRate",{get:function(){return that.el.defaultPlaybackRate;},set:function(value){that.el.defaultPlaybackRate=value;}});property(that,"mediaGroup",{get:function(){return that.el.mediaGroup;},set:function(value){that.el.mediaGroup=value;}});property(that,"playbackRate",{get:function(){return that.el.playbackRate;},set:function(value){that.el.playbackRate=value;}});property(that,"volume",{get:function(){return that.el.volume;},set:function(value){that.el.volume=value;}});property(that,"buffered",{get:function(){return that.el.buffered;}});property(that,"controller",{get:function(){return that.el.controller;}});property(that,"currentSrc",{get:function(){return that.el.currentSrc;}});property(that,"duration",{get:function(){return that.el.duration;}});property(that,"ended",{get:function(){return that.el.ended;}});property(that,"error",{get:function(){return that.el.error;}});property(that,"networkState",{get:function(){return that.el.networkState;}});property(that,"paused",{get:function(){return that.el.paused;}});property(that,"played",{get:function(){return that.el.played;}});property(that,"readyState",{get:function(){return that.el.readyState;}});property(that,"seekable",{get:function(){return that.el.seekable;}});property(that,"seeking",{get:function(){return that.el.seeking;}});property(that,"startDate",{get:function(){return that.el.startDate;}});property(that,"textTracks",{get:function(){return that.el.textTracks;}});that.play=function(){that.el.play();};
that.pause=function(){that.el.pause();};
that.load=function(){that.el.load();};
(function(){that.controls=false;that.preload=true;})();return that;};ASJS.VideoPlayer=function(){var that=new ASJS.AbstractMediaPlayer("<video />");property(that,"poster",{get:function(){return that.el.poster;},set:function(value){that.el.poster=value;}});return that;};ASJS.AudioPlayer=function(){var that=new ASJS.AbstractMediaPlayer("<audio />");return that;};ASJS.MediaSource=function(){var that=new ASJS.DisplayObject("<source />");property(that,"type",{get:function(){return that.getAttr("type");},set:function(value){that.setAttr("type",value);}});property(that,"src",{get:function(){return that.getAttr("src");},set:function(value){that.setAttr("src",value);}});return that;};
ASJS.MediaSource.TYPE_AUDIO_MP3="audio/mpeg";ASJS.MediaSource.TYPE_AUDIO_OGG="audio/ogg";ASJS.MediaSource.TYPE_AUDIO_WAV="audio/wav";ASJS.MediaSource.TYPE_VIDEO_MP4="video/mp4";ASJS.MediaSource.TYPE_VIDEO_OGG="video/ogg";ASJS.MediaSource.TYPE_VIDEO_WEBM="video/webm";ASJS.VideoTrack=function(){var that=new ASJS.DisplayObject("<track />");property(that,"src",{get:function(){return that.getAttr("src");},set:function(value){that.setAttr("src",value);}});property(that,"kind",{get:function(){return that.getAttr("kind");},set:function(value){that.setAttr("kind",value);}});property(that,"label",{get:function(){return that.getAttr("label");},set:function(value){that.setAttr("label",value);}});property(that,"srclang",{get:function(){return that.getAttr("srclang");},set:function(value){that.setAttr("srclang",value);}});return that;};
ASJS.VideoTrack.KIND_CAPTIONS="captions";ASJS.VideoTrack.KIND_CHAPTERS="chapters";ASJS.VideoTrack.KIND_DESCRIPTIONS="descriptions";ASJS.VideoTrack.KIND_METADATA="metadata";ASJS.VideoTrack.KIND_SUBTITLES="subtitles";ASJS.Easing=function(){var that={};var _cycler=new ASJS.Cycler();var _isPlaying;var _id;var _step;var _target;var _from;var _change;var _to;var _type;var _duration;var _stepCallback;var _completeCallback;that.stop=function(){_isPlaying=false;_cycler.removeCallback(update);};
that.play=function(target,to,duration,type,stepCallback,completeCallback){_target=target;_from={};_change={};_to=to;_type=type;_duration=(duration/(1000/_cycler.fps));_stepCallback=stepCallback;_completeCallback=completeCallback;iterateParameters(function(key){_from[key]=_target[key];_change[key]=_to[key]-_from[key];});if(!ASJS.Easing[_type])_type="linearTween";letsPlay();};
function letsPlay(){if(_isPlaying)return;_step=0;_isPlaying=true;_cycler.addCallback(update);};
function update(){if(!_isPlaying)return;if(_step>=_duration){that.stop();iterateParameters(function(key){_target[key]=_to[key];});if(_stepCallback)_stepCallback();if(_completeCallback)_completeCallback();return;};
iterateParameters(function(key){_target[key]=ASJS.Easing[_type](_step,_from[key],_change[key],_duration);});if(_stepCallback)_stepCallback();_step++;};
function iterateParameters(callback){var key;for(key in _to){callback(key);}};
(function(){that.stop();})();return that;};
ASJS.Easing.linearTween=function(t,b,c,d){return c*t/d+b;};ASJS.Easing.easeInQuad=function(t,b,c,d){t/=d;return c*t*t+b;};ASJS.Easing.easeOutQuad=function(t,b,c,d){t/=d;return-c*t*(t-2)+b;};ASJS.Easing.easeInOutQuad=function(t,b,c,d){t/=d/2;if(t<1)return c/2*t*t+b;t--;return-c/2*(t*(t-2)-1)+b;};ASJS.Easing.easeInCubic=function(t,b,c,d){t/=d;return c*t*t*t+b;};ASJS.Easing.easeOutCubic=function(t,b,c,d){t/=d;t--;return c*(t*t*t+1)+b;};ASJS.Easing.easeInOutCubic=function(t,b,c,d){t/=d/2;if(t<1)return c/2*t*t*t+b;t-=2;return c/2*(t*t*t+2)+b;};ASJS.Easing.easeInQuart=function(t,b,c,d){t/=d;return c*t*t*t*t+b;};ASJS.Easing.easeOutQuart=function(t,b,c,d){t/=d;t--;return-c*(t*t*t*t-1)+b;};ASJS.Easing.easeInOutQuart=function(t,b,c,d){t/=d/2;if(t<1)return c/2*t*t*t*t+b;t-=2;return-c/2*(t*t*t*t-2)+b;};ASJS.Easing.easeInQuint=function(t,b,c,d){t/=d;return c*t*t*t*t*t+b;};ASJS.Easing.easeOutQuint=function(t,b,c,d){t/=d;t--;return c*(t*t*t*t*t+1)+b;};ASJS.Easing.easeInOutQuint=function(t,b,c,d){t/=d/2;if(t<1)return c/2*t*t*t*t*t+b;t-=2;return c/2*(t*t*t*t*t+2)+b;};ASJS.Easing.easeInSine=function(t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;};ASJS.Easing.easeOutSine=function(t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;};ASJS.Easing.easeInOutSine=function(t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;};ASJS.Easing.easeInExpo=function(t,b,c,d){return c*Math.pow(2,10*(t/d-1))+b;};ASJS.Easing.easeOutExpo=function(t,b,c,d){return c*(-Math.pow(2,-10*t/d)+1)+b;};ASJS.Easing.easeInOutExpo=function(t,b,c,d){t/=d/2;if(t<1)return c/2*Math.pow(2,10*(t-1))+b;t--;return c/2*(-Math.pow(2,-10*t)+2)+b;};ASJS.Easing.easeInCirc=function(t,b,c,d){t/=d;return-c*(Math.sqrt(1-t*t)-1)+b;};ASJS.Easing.easeOutCirc=function(t,b,c,d){t/=d;t--;return c*Math.sqrt(1-t*t)+b;};ASJS.Easing.easeInOutCirc=function(t,b,c,d){t/=d/2;if(t<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;t-=2;return c/2*(Math.sqrt(1-t*t)+1)+b;};ASJS.AnimationDescriptor=function(name,spriteSheet,size,frameDelay,sequenceList){var that={};var _name=name||"";var _spriteSheet=spriteSheet||"";var _size=size||new ASJS.Point();var _frameDelay=Math.floor(Math.max(1,frameDelay||1));var _sequenceList=sequenceList||[];property(that,"name",{get:function(){return _name;},set:function(value){_name=value;}});property(that,"sequenceList",{get:function(){return _sequenceList;},set:function(value){_sequenceList=value;}});property(that,"frameDelay",{get:function(){return _frameDelay;},set:function(value){_frameDelay=value;}});property(that,"size",{get:function(){return _size;},set:function(value){_size=value;}});property(that,"spriteSheet",{get:function(){return _spriteSheet;},set:function(value){_spriteSheet=value;}});return that;};ASJS.AnimatedSprite=function(){var that=new ASJS.DisplayObject();var _cycler=new ASJS.Cycler();var _animations={};var _isPlaying=false;var _selectedAnimation="";var _step=0;var _angle=ASJS.AnimatedSprite.PLAY_NORMAL;property(that,"selectedAnimation",{get:function(){return _selectedAnimation;}});that.addAnimationDescriptorList=function(animationDescriptorList){var i=-1;var l=animationDescriptorList.length;while(++i<l)that.addAnimationDescriptor(animationDescriptorList[i]);};
that.addAnimationDescriptor=function(animationDescriptor){_animations[animationDescriptor.name]=animationDescriptor;};
that.removeAnimationDescriptor=function(name){_animations[name]=null;delete _animations[name];};
that.stop=function(){_step=0;_isPlaying=false;_cycler.removeCallback(update);};
that.play=function(name,type){if(!_animations[name])return;var angle=!type?ASJS.AnimatedSprite.PLAY_NORMAL:(type==ASJS.AnimatedSprite.PLAY_NORMAL?ASJS.AnimatedSprite.PLAY_NORMAL:ASJS.AnimatedSprite.PLAY_REVERSE);if(_selectedAnimation==name&&_angle==angle){letsPlay();return;};
_selectedAnimation=name;_angle=angle;_step=0;var spriteSheet=_animations[_selectedAnimation].spriteSheet;if(spriteSheet!=""){var image=new ASJS.Image();image.addEventListener(ASJS.LoaderEvent.LOAD,function(){that.setCSS("background-image","url("+spriteSheet+")");letsPlay();});image.addEventListener(ASJS.LoaderEvent.ERROR,function(){trace("Error: missing animation sprite sheet");});image.src=spriteSheet;}else letsPlay();};
function letsPlay(){if(_isPlaying)return;_isPlaying=true;_cycler.addCallback(update);};
function update(){if(!_isPlaying)return;var selectedAnimation=_animations[_selectedAnimation];var sequenceList=selectedAnimation.sequenceList;var rect=sequenceList[_step];var size=selectedAnimation.size;var percentW=that.width/rect.width;var percentH=that.height/rect.height;that.setCSS("background-position",(-rect.x*percentW)+"px "+(-rect.y*percentH)+"px");that.setCSS("background-size",(size.x*percentW)+"px "+(size.y*percentH)+"px");that.setSize(rect.width*percentW,rect.height*percentH);if(_angle==ASJS.AnimatedSprite.PLAY_NORMAL){_step++;if(_step>=sequenceList.length)_step=0;}else{_step--;if(_step<0)_step=sequenceList.length-1;}};
(function(){that.stop();})();return that;};
ASJS.AnimatedSprite.PLAY_NORMAL="ASJS-AnimatedSprite-playNormal";ASJS.AnimatedSprite.PLAY_REVERSE="ASJS-AnimatedSprite-playReverse";ASJS.AnimationLoader=function(){var that={};var _dfd;var _loader;that.load=function(url){_dfd=$.Deferred();_loader=new ASJS.Loader();_loader.requestType=ASJS.RequestMethod.GET;_loader.addEventListener(ASJS.LoaderEvent.LOAD,onLoad);_loader.addEventListener(ASJS.LoaderEvent.ERROR,onLoadError);_loader.dataType="json";_loader.load(url);return _dfd.promise();};
function parseAnimationDescriptor(data){var animationDescriptor=new ASJS.AnimationDescriptor(data.id,data.image,new ASJS.Point(data.imageSize.w,data.imageSize.h),data.frameDelay);var i=-1;var l=data.frames.length;var frames=[];while(++i<l){var frame=data.frames[i];var j=-1;var m=Math.max(1,frame.l||1)*animationDescriptor.frameDelay;while(++j<m)frames.push(new ASJS.Rectangle(frame.x,frame.y,frame.w,frame.h));};
animationDescriptor.sequenceList=frames;return animationDescriptor;};
function onLoad(event){_loader.removeEventListeners();try{var i=-1;var l=_loader.content.length;var animationDescriptorList=[];while(++i<l)animationDescriptorList.push(parseAnimationDescriptor(_loader.content[i]));_dfd.resolve(animationDescriptorList);}catch(e){throw new Error("Invalid animation descriptor file: "+_loader.url);_dfd.reject();}};
function onLoadError(event){_loader.removeEventListeners();_dfd.reject();};
return that;};ASJS.BlendMode={};ASJS.BlendMode.SOURCE_OVER="source-over";ASJS.BlendMode.SOURCE_IN="source-in";ASJS.BlendMode.SOURCE_OUT="source-out";ASJS.BlendMode.SOURCE_ATOP="source-atop";ASJS.BlendMode.DESTINATION_OVER="destination-over";ASJS.BlendMode.DESTINATION_IN="destination-in";ASJS.BlendMode.DESTINATION_OUT="destination-out";ASJS.BlendMode.DESTINATION_ATOP="destination-atop";ASJS.BlendMode.LIGHTER="lighter";ASJS.BlendMode.COPY="copy";ASJS.BlendMode.XOR="xor";ASJS.BlendMode.MULTIPLY="multiply";ASJS.BlendMode.SCREEN="screen";ASJS.BlendMode.OVERLAY="overlay";ASJS.BlendMode.DARKEN="darken";ASJS.BlendMode.LIGHTEN="lighten";ASJS.BlendMode.COLOR_DODGE="color-dodge";ASJS.BlendMode.COLOR_BURN="color-burn";ASJS.BlendMode.HARD_LIGHT="hard-light";ASJS.BlendMode.SOFT_LIGHT="soft-light";ASJS.BlendMode.DIFFERENCE="difference";ASJS.BlendMode.EXCLUSION="exclusion";ASJS.BlendMode.HUE="hue";ASJS.BlendMode.SATURATION="saturation";ASJS.BlendMode.COLOR="color";ASJS.BlendMode.LUMINOSITY="luminosity";ASJS.GradientColorData=function(stop,color,alpha){var that={};that.stop=stop||0;that.color=color||"#0";that.alpha=alpha||1;return that;};ASJS.LinearGradientData=function(x,y,w,h){var that=new ASJS.Rectangle(x,y,w,h);return that;};ASJS.RadialGradientData=function(x0,y0,r0,x1,y1,r1){var that={};that.x0=x0||0;that.y0=y0||0;that.r0=r0||0;that.x1=x1||0;that.y1=y1||0;that.r1=r1||0;return that;};ASJS.AbstractBitmapFilter=function(){var that={};that.execute=function(pixels){return pixels;};
return that;};ASJS.AbstractConvoluteBitmapFilter=function(opaque){var that=new ASJS.AbstractBitmapFilter();var _opaque=opaque;property(that,"_matrix",{get:function(){return[1];}});that.execute=function(pixels){var d=pixels.data;return convolute(pixels);};
function convolute(pixels){var weights=that._matrix;var side=Math.round(Math.sqrt(weights.length));var halfSide=Math.floor(side*0.5);var src=pixels.data;var sw=pixels.width;var sh=pixels.height;var w=sw;var h=sh;var bitmapHelper=new ASJS.Bitmap(w,h);var output=bitmapHelper.getImageData(0,0,w,h);var dst=output.data;var alphaFac=_opaque?1:0;var y=-1;while(++y<h){var x=-1;while(++x<w){var sy=y;var sx=x;var dstOff=(y*w+x)*4;var r=0;var g=0;var b=0;var a=0;var cy=-1;while(++cy<side){var cx=-1;while(++cx<side){var scy=sy+cy-halfSide;var scx=sx+cx-halfSide;if(scy>=0&&scy<sh&&scx>=0&&scx<sw){var srcOff=(scy*sw+scx)*4;var wt=weights[cy*side+cx];r+=src[srcOff]*wt;g+=src[srcOff+1]*wt;b+=src[srcOff+2]*wt;a+=src[srcOff+3]*wt;}}};
dst[dstOff]=r;dst[dstOff+1]=g;dst[dstOff+2]=b;dst[dstOff+3]=a+alphaFac*(255-a);}};
return output;};return that;};ASJS.AlphaBitmapFilter=function(type){var that=new ASJS.AbstractBitmapFilter();var _type=type==ASJS.AlphaBitmapFilter.TYPE_DARKNESS;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){var average=((d[i]+d[i+1]+d[i+2])/3);var a=Math.round(_type?255-average:average);d[i+3]-=a;};
return pixels;};
return that;};
ASJS.AlphaBitmapFilter.TYPE_DARKNESS="ASJS-AlphaBitmapFilter-typeDarkness";ASJS.AlphaBitmapFilter.TYPE_BRIGHTNESS="ASJS-AlphaBitmapFilter-typeBrightness";ASJS.BlurBitmapFilter=function(value){var that=new ASJS.AbstractConvoluteBitmapFilter();var _blurValue=Math.max(1,value||1);property(that,"_matrix",{get:function(){var value=1/Math.pow(_blurValue,2);var matrix=[];var i=-1;while(++i<_blurValue){var j=-1;while(++j<_blurValue){matrix.push(value);}};
return matrix;}});return that;};ASJS.BrightnessBitmapFilter=function(adjustment){var that=new ASJS.AbstractBitmapFilter();var _adjustment=adjustment;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){d[i]+=_adjustment;d[i+1]+=_adjustment;d[i+2]+=_adjustment;};
return pixels;};
return that;};ASJS.ContrastBitmapFilter=function(adjustment){var that=new ASJS.AbstractBitmapFilter();var _adjustment=adjustment||1;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){d[i]=128-((128-d[i])*_adjustment);d[i+1]=128-((128-d[i+1])*_adjustment);d[i+2]=128-((128-d[i+2])*_adjustment);};
return pixels;};
return that;};ASJS.CutoutBitmapFilter=function(adjustment){var that=new ASJS.AbstractBitmapFilter();var _adjustment=adjustment||255;that.execute=function(pixels){var d=pixels.data;var average=255/_adjustment;var i=-4;var l=d.length;while((i+=4)<l){d[i]=Math.floor(d[i]/average)*average;d[i+1]=Math.floor(d[i+1]/average)*average;d[i+2]=Math.floor(d[i+2]/average)*average;};
return pixels;};
return that;};ASJS.GrayscaleBitmapFilter=function(){var that=new ASJS.AbstractBitmapFilter();that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){var r=d[i];var g=d[i+1];var b=d[i+2];var v=0.2126*r+0.7152*g+0.0722*b;d[i]=d[i+1]=d[i+2]=v;};
return pixels;};
return that;};ASJS.InvertBitmapFilter=function(){var that=new ASJS.AbstractBitmapFilter();that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){d[i]=128-(d[i]-128);d[i+1]=128-(d[i+1]-128);d[i+2]=128-(d[i+2]-128);};
return pixels;};
return that;};ASJS.SharpenBitmapFilter=function(){var that=new ASJS.AbstractConvoluteBitmapFilter();property(that,"_matrix",{get:function(){return[0,-1,0,-1,5,-1,0,-1,0];}});return that;};ASJS.ThresholdBitmapFilter=function(threshold){var that=new ASJS.AbstractBitmapFilter();var _threshold=threshold;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){var r=d[i];var g=d[i+1];var b=d[i+2];var v=(0.2126*r+0.7152*g+0.0722*b>=_threshold)?255:0;d[i]=d[i+1]=d[i+2]=v;};
return pixels;};
return that;};ASJS.TintBitmapFilter=function(r,g,b,a){var that=new ASJS.AbstractBitmapFilter();var _r=r||0;var _g=g||0;var _b=b||0;var _a=a||0;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){d[i]+=_r;d[i+1]+=_g;d[i+2]+=_b;d[i+3]+=_a;};
return pixels;};
return that;};ASJS.OpacityBitmapFilter=function(adjustment){var that=new ASJS.AbstractBitmapFilter();var _adjustment=adjustment||1;that.execute=function(pixels){var d=pixels.data;var i=-4;var l=d.length;while((i+=4)<l){d[i+3]*=_adjustment;};
return pixels;};
return that;};ASJS.MaskBitmapFilter=function(mask,pos,invert,cutout){var that=new ASJS.AbstractBitmapFilter();var _mask=mask;var _pos=pos;var _invert=invert;var _cutout=cutout==undefined?true:cutout;that.execute=function(pixels){var srcD=pixels.data;var maskPixels=mask.getImageData(0,0,mask.bitmapWidth,mask.bitmapHeight);var maskD=maskPixels.data;var srcW=pixels.width;var maskW=maskPixels.width;var maskH=maskPixels.height;var maxMaskW=_pos.x+maskW;var maxMaskH=_pos.y+maskH;var i=-4;var l=srcD.length;while((i+=4)<l){var srcPixelLinearPos=Math.floor(i/4);var srcPixelPos=new ASJS.Point(Math.floor(srcPixelLinearPos%srcW),Math.floor(srcPixelLinearPos/srcW));if(srcPixelPos.x>=_pos.x&&srcPixelPos.y>=_pos.y&&srcPixelPos.x<maxMaskW&&srcPixelPos.y<maxMaskH){var j=((srcPixelPos.y-_pos.y)*maskW+(srcPixelPos.x-_pos.x))*4;var sA=srcD[i+3];var mA=maskD[j+3];srcD[i+3]=Math.floor(sA*((_invert?(255-mA):mA)/255));}else if(_cutout)srcD[i+3]=0;};
return pixels;};
return that;};ASJS.PixelateBitmapFilter=function(value){var that=new ASJS.AbstractBitmapFilter();var _value=Math.max(1,value||1);that.execute=function(pixels){var d=pixels.data;var pixS=_value;var w=pixels.width;var h=pixels.height;var step=4*pixS;var i=-step;var l=d.length;while((i+=step)<l){var pixelLinearPos=Math.floor(i/4);var pixelPos=new ASJS.Point(Math.floor(pixelLinearPos%w),Math.floor(pixelLinearPos/w));if(pixelPos.x%pixS>0)i=i-pixelPos.x*4-step;else if((pixelPos.y%pixS)==0){var x;var y;var r=0;var g=0;var b=0;var a=0;var maxW=Math.min(w-pixelPos.x,pixS);var maxH=Math.min(h-pixelPos.y,pixS);x=-1;while(++x<maxW){y=-1;while(++y<maxH){var pos=i+y*4*w+x*4;r+=d[pos];g+=d[pos+1];b+=d[pos+2];a+=d[pos+3];}};
var pb=maxW*maxH;r=Math.round(r/pb);g=Math.round(g/pb);b=Math.round(b/pb);a=Math.round(a/pb);x=-1;while(++x<maxW){y=-1;while(++y<maxH){var pos=i+y*4*w+x*4;d[pos]=r;d[pos+1]=g;d[pos+2]=b;d[pos+3]=a;}}}};
return pixels;};
return that;};ASJS.BitmapBounds={};ASJS.BitmapBounds.execute=function(bitmap){var pixels=bitmap.getImageData(0,0,bitmap.bitmapWidth,bitmap.bitmapHeight);var d=pixels.data;var w=pixels.width;var size=new ASJS.Rectangle(pixels.width,pixels.height,0,0);var i=-4;var l=d.length;while((i+=4)<l){if(d[i+3]>0){var pixelLinearPos=Math.floor(i/4);var pixelPos=new ASJS.Point(Math.floor(pixelLinearPos%w),Math.floor(pixelLinearPos/w));if(pixelPos.x<size.x)size.x=pixelPos.x;if(pixelPos.y<size.y)size.y=pixelPos.y;if(pixelPos.x-size.x+1>size.width)size.width=pixelPos.x-size.x+1;if(pixelPos.y-size.y+1>size.height)size.height=pixelPos.y-size.y+1;}};
return size;};ASJS.Cell=function(tag){var that=new ASJS.Sprite(tag);var _data={};var _checked=false;property(that,"name",{get:function(){return that.getAttr("name");},set:function(value){that.setAttr("name",value);}});property(that,"checked",{get:function(){return _checked;},set:function(value){_checked=value;}});property(that,"data",{get:function(){return _data;},set:function(value){_data=value;if(_data.id)that.id=_data.id;that.showData();}});that.drawNow=function(){};
that.showData=function(){};
function onClick(event){var e=new ASJS.MouseEvent(ASJS.Cell.CLICK);e.ctrlKey=event.ctrlKey;e.shiftKey=event.shiftKey;that.dispatchEvent(e);};
(function(){that.setCSS("position","relative");that.mouseChildren=false;that.addEventListener(ASJS.MouseEvent.CLICK,onClick);})();return that;};
ASJS.Cell.CLICK="ASJS-Cell-click";ASJS.CustomList=function(){var that=new ASJS.Sprite();var _name;var _multiselect;var _cell;var _itemsContainer;var _lastCellIndex;property(that,"length",{get:function(){return _itemsContainer.numChildren;}});property(that,"cell",{get:function(){return _cell;},set:function(value){_cell=value;}});property(that,"multiselect",{get:function(){return _multiselect;},set:function(value){_multiselect=value;}});property(that,"selected",{get:function(){var value=[];var i=-1;var l=that.length;while(++i<l){var item=that.getCellAt(i);if(item.checked)value.push(item);};
return value;},set:function(value){that.clearSelection();var j=-1;var l=that.length;var valueLength=that.multiselect?value.length:1;while(++j<valueLength){var i=-1;while(++i<l){var item=that.getCellAt(i);if(i==value[j])item.checked=true;}}}});property(that,"name",{get:function(){return _name;},set:function(value){_name=value;var i=-1;var l=that.length;while(++i<l){var item=that.getCellAt(i);item.name=_name;}}});that.clearSelection=function(){var i=-1;var l=that.length;while(++i<l){var item=that.getCellAt(i);item.checked=false;}};
that.clearList=function(){while(that.length>0)_itemsContainer.removeChildAt(0);};
that.setList=function(cellDataVoList){that.clearList();var i=-1;var l=cellDataVoList.length;while(++i<l)that.addItem(cellDataVoList[i]);};
that.getList=function(){var list=[];var i=-1;var l=that.length;while(++i<l){var cellData=that.getItemAt(i);list.push(cellData);};
return list;};
that.getCellAt=function(index){if(index<0||index>=that.length)return null;return _itemsContainer.getChildAt(index);};
that.getItemAt=function(index){var cell=that.getCellAt(index);return cell?cell.data:null;};
that.getCellById=function(id){var i=-1;var l=that.length;while(++i<l){var cell=that.getCellAt(i);if(cell.id==id)return cell;};
return null;};
that.getItemById=function(id){var cell=that.getCellById(id);return cell?cell.data:null;};
that.addItem=function(cellDataVo){var cell=new _cell();cell.name=_name;cell.data=cellDataVo;return _itemsContainer.addChild(cell);};
that.addItemAt=function(cellDataVo,index){var cell=that.addItem(cellDataVo);_itemsContainer.setChildIndex(cell,index);return cell;};
that.removeCell=function(cell){if(!cell||!_itemsContainer.contains(cell))return;_itemsContainer.removeChild(cell);};
that.removeCellById=function(id){that.removeCell(that.getCellById(id));};
that.drawNow=function(){var i=-1;var l=that.length;while(++i<l){var cell=that.getCellAt(i);cell.setSize(that.width,that.height);cell.drawNow();}};
function onCellClick(event){var cell=_itemsContainer.getChildByDOMObject(event.target);if(!cell)return;if(!that.multiselect||(!event.ctrlKey&&!event.shiftKey))that.clearSelection();cell.checked=event.ctrlKey?!cell.checked:true;var cellIndex=_itemsContainer.getChildIndex(cell);if(!event.ctrlKey&&event.shiftKey){var i=-1;var l=Math.abs(cellIndex-_lastCellIndex);var step=cellIndex>_lastCellIndex?-1:1;while(++i<l){cell=that.getCellAt(cellIndex+(i*step));cell.checked=true;}};
_lastCellIndex=cellIndex;that.dispatchEvent(ASJS.CustomList.CHANGE);};
(function(){_multiselect=false;_cell=ASJS.Cell;_lastCellIndex=0;_itemsContainer=new ASJS.Sprite();_itemsContainer.setCSS("position","relative");_itemsContainer.setSize("auto","auto");_itemsContainer.addEventListener(ASJS.Cell.CLICK,onCellClick);that.addChild(_itemsContainer);})();return that;};
ASJS.CustomList.CHANGE="ASJS-CustomList-change";ASJS.CellDataVo=function(data){var that={};var _data=data||{};that.id=_data.id||null;return that;};ASJS.FormElement=function(tag){var that=new ASJS.Sprite(tag);property(that,"name",{get:function(){return that.getAttr("name");},set:function(value){that.setAttr("name",value);}});that.drawNow=function(){};(function(){that.tabIndex="auto";})();return that;};ASJS.AbstractTextElement=function(tag){var that=new ASJS.FormElement(tag);var _super={};var _protectedChars=[ASJS.Keyboard.LEFT_ARROW,ASJS.Keyboard.UP_ARROW,ASJS.Keyboard.RIGHT_ARROW,ASJS.Keyboard.DOWN_ARROW,ASJS.Keyboard.BACKSPACE,ASJS.Keyboard.TAB,ASJS.Keyboard.DELETE,ASJS.Keyboard.ENTER,ASJS.Keyboard.SHIFT,ASJS.Keyboard.CTRL,ASJS.Keyboard.END,ASJS.Keyboard.HOME,ASJS.Keyboard.CAPS_LOCK,ASJS.Keyboard.ESCAPE];var _controlChars=[ASJS.Keyboard.A,ASJS.Keyboard.C,ASJS.Keyboard.V,ASJS.Keyboard.X,ASJS.Keyboard.NUMPAD_1,ASJS.Keyboard.NUMPAD_3,ASJS.Keyboard.F7,ASJS.Keyboard.F9];var _restrict;property(that,"readonly",{get:function(){return that.getAttr("readonly");},set:function(value){if(value)that.setAttr("readonly","readonly");else that.removeAttr("readonly");}});property(that,"placeholder",{get:function(){return that.getAttr("placeholder");},set:function(value){that.setAttr("placeholder",value);}});property(that,"val",{get:function(){return that.jQuery.val();},set:function(value){that.jQuery.val(value);}});property(that,"maxChar",{get:function(){return that.getAttr("maxLength");},set:function(value){that.setAttr("maxLength",value);}});property(that,"restrict",{get:function(){return _restrict;},set:function(value){_restrict=value;}});property(that,"autofocus",{get:function(){return that.getAttr("autofocus");},set:function(value){if(value)that.setAttr("autofocus","autofocus");else that.removeAttr("autofocus");}});function onKeyPress(event){if(_restrict){var charCode=event.which?event.which:event.keyCode;if(_protectedChars.indexOf(event.keyCode)>-1||(event.ctrlKey&&_controlChars.indexOf(charCode)>-1))return;if(!new RegExp(_restrict,"i").test(String.fromCharCode(event.which)))return false;}};
function onKeyUp(event){var charCode=event.which?event.which:event.keyCode;if(event.ctrlKey&&_controlChars.indexOf(charCode)>-1)onChange(event);};
function onChange(event){if(_restrict){var regExp=new RegExp("(?!"+_restrict+").","g");that.val=that.val.replace(regExp,'');}};
(function(){that.addEventListener(ASJS.KeyboardEvent.KEY_PRESS,onKeyPress);that.addEventListener(ASJS.KeyboardEvent.KEY_UP,onKeyUp);that.addEventListener(ASJS.Event.CHANGE,onChange);})();return that;};ASJS.Button=function(){var that=new ASJS.FormElement("<input />");property(that,"label",{get:function(){return that.getAttr("value");},set:function(value){that.setAttr("value",value);}});property(that,"submit",{get:function(){return that.getAttr("type")=="submit";},set:function(value){that.setAttr("type",value?"submit":"button");}});(function(){that.setAttr("type","button");})();return that;};ASJS.Checkbox=function(){var that=new ASJS.FormElement("<label />");var _super={};var _checkbox=new ASJS.DisplayObject("<input />");var _label=new ASJS.DisplayObject();extendProperty(_super,that,"enabled");property(that,"enabled",{set:function(value){_super.enabled=value;_checkbox.enabled=that.enabled;that.drawNow();}});property(that,"label",{get:function(){return _label;}});property(that,"checkbox",{get:function(){return _checkbox;}});property(that,"name",{get:function(){return _checkbox.getAttr("name");},set:function(value){_checkbox.setAttr("name",value);}});property(that,"checked",{get:function(){return _checkbox.jQuery.is(":checked");},set:function(value){_checkbox.jQuery.prop("checked",value);_checkbox.jQuery.change();}});(function(){_checkbox.setAttr("type","checkbox");_checkbox.visible=false;that.addChild(_checkbox);_label.setSize("100%","100%");_label.enabled=false;that.addChild(_label);})();return that;};ASJS.DropDownOption=function(value,label,disabled,selected){var that=new ASJS.PrimitiveDisplayObject("<option />");property(that,"value",{get:function(){return that.getAttr("value");},set:function(value){that.setAttr("value",value);}});property(that,"label",{get:function(){return that.text;},set:function(value){that.text=value;}});property(that,"selected",{get:function(){return that.getAttr("selected");},set:function(value){if(value)that.setAttr("selected","selected");else that.removeAttr("selected");}});property(that,"disabled",{get:function(){return that.getAttr("disabled");},set:function(value){if(value)that.setAttr("disabled","disabled");else that.removeAttr("disabled");}});(function(){if(value!=null)that.value=value;if(label!=null)that.label=label;if(disabled!=null)that.disabled=disabled;if(selected!=null)that.selected=selected;})();return that;};ASJS.DropDown=function(){var that=new ASJS.FormElement();var _super={};var _select=new ASJS.Sprite("<select />");extendProperty(_super,that,"enabled");property(that,"enabled",{set:function(value){_super.enabled=value;_select.enabled=that.enabled;that.drawNow();}});property(that,"name",{get:function(){return _select.getAttr("name");},set:function(value){_select.setAttr("name",value);}});property(that,"select",{get:function(){return _select;}});property(that,"val",{get:function(){return _select.jQuery.val();},set:function(value){_select.jQuery.val(value);}});that.clearOptions=function(){_select.html="";};
that.setOptions=function(options){that.clearOptions();var i=-1;var l=options.length;while(++i<l)that.addOption(options[i]);};
that.addOption=function(option){_select.addChild(option);};
that.drawNow=function(){_select.setSize(that.width+30,that.height);};
(function(){that.setCSS("overflow","hidden");that.addChild(_select);})();return that;};ASJS.FileSelector=function(){var that=new ASJS.FormElement();var _super={};that._fileInput=new ASJS.DisplayObject("<input />");var _preview=new ASJS.Sprite();property(that,"preview",{get:function(){return _preview;}});property(that,"val",{get:function(){return that._fileInput.jQuery.val();}});property(that,"name",{get:function(){return that._fileInput.getAttr("name");},set:function(value){that._fileInput.setAttr("name",value);}});extendProperty(_super,that,"enabled");property(that,"enabled",{set:function(value){_super.enabled=value;that._fileInput.enabled=that.enabled;that.drawNow();}})
property(that,"fileInput",{get:function(){return _fileInput;}});that._onChange=function(event){_preview.text=that.val;that.dispatchEvent(ASJS.FileSelector.ON_CHANGE);};
function onClick(event){if(event.target==that._fileInput.el)return;that._fileInput.jQuery.click();};
(function(){that._fileInput.setAttr("type","file");that._fileInput.addEventListener(ASJS.Event.CHANGE,that._onChange);that._fileInput.visible=false;that.addChild(that._fileInput);_preview.setSize("100%","100%");_preview.move(0,0);that.addChild(_preview);that.addEventListener(ASJS.MouseEvent.CLICK,onClick);})();return that;};
ASJS.FileSelector.ON_CHANGE="ASJS-FileSelector-onChange";ASJS.Form=function(){var that=new ASJS.Sprite("<form />");property(that,"action",{get:function(){return that.getAttr("action");},set:function(value){that.setAttr("action",value);}});property(that,"method",{get:function(){return that.getAttr("method");},set:function(value){that.setAttr("method",value);}});property(that,"enctype",{get:function(){return that.getAttr("enctype");},set:function(value){that.setAttr("enctype",value);}});that.reset=function(){that.el.reset();};
that.submit=function(){that.el.submit();};
return that;};ASJS.Form.ENCTYPE_MULTIPART="multipart/form-data";ASJS.ImageSelector=function(){var that=new ASJS.FileSelector();var _reader=new FileReader();that._onChange=function(event){var target=that._fileInput.el;if(target.files&&target.files[0]){that.dispatchEvent(ASJS.ImageSelector.ON_CHANGE_START);_reader.readAsDataURL(target.files[0]);}};
function readerOnLoad(event){that.preview.setCSS('background-image','url('+event.target.result+')');that.dispatchEvent(ASJS.ImageSelector.ON_CHANGE_END);};
(function(){that._fileInput.removeEventListeners();that._fileInput.addEventListener(ASJS.Event.CHANGE,that._onChange);_reader.onload=readerOnLoad;})();return that;};
ASJS.ImageSelector.ON_CHANGE_START="ASJS-ImageSelector-onChangeStart";ASJS.ImageSelector.ON_CHANGE_END="ASJS-ImageSelector-onChangeEnd";ASJS.TextArea=function(){var that=new ASJS.AbstractTextElement("<textarea />");return that;};ASJS.TextInput=function(){var that=new ASJS.AbstractTextElement("<input />");property(that,"type",{get:function(){return that.getAttr("type");},set:function(value){that.setAttr("type",value);}});(function(){that.type=ASJS.TextInput.TYPE_TEXT;})();return that;};
ASJS.TextInput.TYPE_TEXT="text";ASJS.TextInput.TYPE_PASSWORD="password";ASJS.TextInput.TYPE_EMAIL="email";ASJS.TextInput.TYPE_NUMBER="number";ASJS.RadioButton=function(){var that=new ASJS.FormElement("<label />");var _super={};var _radio=new ASJS.DisplayObject("<input />");var _label=new ASJS.DisplayObject();extendProperty(_super,that,"enabled");property(that,"enabled",{set:function(value){_super.enabled=value;_radio.enabled=that.enabled;that.drawNow();}});property(that,"radio",{get:function(){return _radio;}});property(that,"name",{get:function(){return _radio.getAttr("name");},set:function(value){_radio.setAttr("name",value);}});property(that,"checked",{get:function(){return _radio.jQuery.is(":checked");},set:function(value){_radio.jQuery.prop("checked",value);if(value)_radio.jQuery.change();}});property(that,"val",{get:function(){return _radio.getAttr("value");},set:function(value){_radio.setAttr("value",value);}});that.drawNow=function(){};(function(){_radio.setAttr("type","radio");_radio.visible=false;that.addChild(_radio);_label.setSize("100%","100%");_label.enabled=false;that.addChild(_label);})();return that;};ASJS.AbstractFilter=function(value){var that={};that.value=value;that.execute=function(){};
return that;};ASJS.ContrastFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"contrast("+value+"%)";};
return that;};ASJS.InvertFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"invert("+value+"%)";};
return that;};ASJS.BlurFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"blur("+value+"px)";};
return that;};ASJS.GrayscaleFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"grayscale("+value+"%)";};
return that;};ASJS.SaturateFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"saturate("+value+"%)";};
return that;};ASJS.BrightnessFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"brightness("+value+"%)";};
return that;};ASJS.HueRotateFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"hue-rotate("+value+"deg)";};
return that;};ASJS.SepiaFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(){return"sepia("+value+"%)";};
return that;};ASJS.DropShadowFilter=function(value){var that=new ASJS.AbstractFilter(value);that.execute=function(h,v,blur,spread,color){return"drop-shadow("+h+"px "+v+"px "+blur+"px "+spread+"px "+color+")";};
return that;};ASJS.NotificationHandler=function(){return singleton(ASJS.NotificationHandler,function(){var that={};var _notificationHandlers={};that.register=function(notificationDispatcher){if(!notificationDispatcher.handlers)return;var i=-1;var l=notificationDispatcher.handlers.length;while(++i<l){var notificationType=notificationDispatcher.handlers[i];if(!_notificationHandlers[notificationType])_notificationHandlers[notificationType]=[];_notificationHandlers[notificationType].push(notificationDispatcher);}};
that.remove=function(notificationDispatcher){if(!notificationDispatcher.handlers)return;var i=-1;var l=notificationDispatcher.handlers?notificationDispatcher.handlers.length:0;while(++i<l){var notificationType=notificationDispatcher.handlers[i];if(_notificationHandlers[notificationType]){var index=_notificationHandlers[notificationType].indexOf(notificationDispatcher);if(index>-1)_notificationHandlers[notificationType].splice(index,1);}}};
that.sendNotification=function(notificationType,data){var i=-1;var l=_notificationHandlers[notificationType]?_notificationHandlers[notificationType].length:0;var removeHandlers=[];while(++i<l){if(_notificationHandlers[notificationType][i]){_notificationHandlers[notificationType][i].reciveNotification(notificationType,data);}else{_notificationHandlers[notificationType].splice(i,1);l--;}}};
return that;});};ASJS.NotificationDispatcher=function(){var that={};var _notificationHandler=new ASJS.NotificationHandler();that.handlers=[];that.destruct=function(){that.removeNotificationHandlers();that=null;};that.sendNotification=function(notificationType,data){_notificationHandler.sendNotification(notificationType,data);};
that.reciveNotification=function(notificationType,data){};
that.registerNotificationHandlers=function(){_notificationHandler.register(that);};
that.removeNotificationHandlers=function(){_notificationHandler.remove(that);};
return that;};ASJS.AbstractCommand=function(){var that=new ASJS.NotificationDispatcher();that.execute=function(){};
return that;};ASJS.AbstractMediator=function(view){var that=new ASJS.NotificationDispatcher();that.view;(function(){that.view=view;})();return that;};ASJS.AbstractModel=function(){var that=new ASJS.EventDispatcher();var _listenerPrefix="ASJS-AbstractModel-";var _data={};property(that,"data",{get:function(){return _data;},set:function(value){_data=value;that.dispatchEvent(ASJS.AbstractModel.CHANGED);}});that.get=function(key){return _data&&_data[key]?_data[key]:null;};
that.set=function(key,value){if(!_data)_data={};var o=_data[key];_data[key]=value;that.dispatchEvent(ASJS.AbstractModel.CHANGED);that.dispatchEvent(_listenerPrefix+key,[o,value]);};
that.clear=function(){_data=null;that.dispatchEvent(ASJS.AbstractModel.CLEARED);};
that.watch=function(key,listener){that.addEventListener(_listenerPrefix+key,listener);};
that.merge=function(data){merge(_data,data);};
function merge(originalData,newData){var newKey;for(newKey in newData){if(typeof originalData[newKey]=="object")merge(originalData[newKey],newData[newKey]);else originalData[newKey]=newData[newKey];}};
return that;};
ASJS.AbstractModel.CHANGED="ASJS-AbstractModel-changed";ASJS.AbstractModel.CLEARED="ASJS-AbstractModel-cleared";